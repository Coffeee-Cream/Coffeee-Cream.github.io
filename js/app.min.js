import http from"https://unpkg.com/isomorphic-git@beta/http/web/index.js";var cert;window.fs=new LightningFS("fs",{wipe:!0}),window.pfs=window.fs.promises,window.onload=function(){window.md=window.markdownit({html:!0,breaks:!0,linkify:!0,typographer:!0}),new IntersectionObserver((e=>{e[0].intersectionRatio<=0?document.querySelector("#blog").style.visibility="hidden":document.querySelector("#blog").style.visibility="visible"})).observe(document.querySelector("#blog")),new IntersectionObserver((e=>{e[0].intersectionRatio<=0?document.querySelector("#home").style.visibility="hidden":document.querySelector("#home").style.visibility="visible"})).observe(document.querySelector("#home")),getBlogs()};const dir="/";async function getBlogs(){await git.clone({fs:fs,http:http,dir:"/",corsProxy:"https://cors.isomorphic-git.org",url:"https://github.com/Coffeee-Cream/blog",ref:"main",singleBranch:!0,depth:10}),document.querySelector("#blog > .vertical-center").innerHTML=`<section>${md.render(await pfs.readFile("/README.md",{encoding:"utf8"}))}<br><div class="scroll">scroll â–¼ down</div></section>`,0==navigator.onLine&&(document.querySelector("#blog-list > .vertical-center").innerHTML="Your Offline");let e=await pfs.readFile("/registry/scratch-projects.json",{encoding:"utf8"});e=JSON.parse(e),e=e.data,document.querySelector("#scratch-proj > .vertical-center").style.display="none";for(let t=0;t<e.length;t++)if(t>5){let e=document.createElement("div");e.innerHTML='<br>\n\t\t\t<span style="text-align: center">\n\t\t\t<a href="https://scratch.mit.edu/users/CoffeeeCream/projects/" target="_blank">More...</a>\n\t\t\t</span>\n\t\t\t',document.getElementById("proj-holder").append(e)}else{let n=document.createElement("div");n.innerHTML=`<img src="https://cdn2.scratch.mit.edu/get_image/project/${e[t].id}_144x108.png" width="90%">\n\t\t\t<br>\n\t\t\t<span style="text-align: center">\n\t\t\t<a href="https://scratch.mit.edu/projects/${e[t].id}" target="_blank">${e[t].name}</a>\n\t\t\t</span>\n\t\t\t`,document.getElementById("proj-holder").append(n)}let t=await pfs.readFile("/blogs/blogs.json",{encoding:"utf8"});t=JSON.parse(t),document.querySelector("#blog-list").innerHTML="";for(let e=0;e<t.length;e++){let n=document.createElement("span");n.innerHTML=`\n\t\t<a href="/?blog=${t[e].name}#read-blog">${t[e].name}</a>\n\t\t`,document.querySelector("#blog-list").append(n),n=document.createElement("br"),document.querySelector("#blog-list").append(n)}if(window.location.href.indexOf("#read-blog")>-1){const e=window.location.search,n=new URLSearchParams(e).get("blog");for(let e=0;e<t.length;e++)n==t[e].name&&(document.querySelector("#read-blog > .vertical-center").style.display="none",document.getElementById("reader").innerHTML=md.render(await pfs.readFile("/blogs/markup/"+t[e].file.location,{encoding:"utf8"})),document.getElementById("reader").style.display="block")}}setTimeout((()=>{0==navigator.onLine&&(document.querySelector("#blog-list > .vertical-center").innerHTML="Your Offline")}),1e4);
